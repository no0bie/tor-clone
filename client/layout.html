<!DOCTYPE html>
<html>

<head>
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>

    <title>Tor Client</title>
</head>

<body style="margin: 0;">
    <div id="div" style="display: flex;flex-direction: column;align-items: center;">
        <h2>Your client IP is: {{.ClientIP}}</h2>
        <div style="display: flex;justify-content: space-evenly;padding: 20px;">
            <form method="POST" action="/">
                <select name="type">
                    <option value="end">Check Circuit</option>
                    <option value="search">Search Google</option>
                    <option value="url">Raw URL or Text</option>
                </select>
                
                <input placeholder="Type a URL or text" name="action" type="text" value="{{.Action}}" />

                <input type="submit" value="submit" />
            </form>
            <button onclick="refresh()">Refresh response</button>
        </div>
        <h3>{{.Circuit}}</h3>
    </div>
    <iframe id="iframe" src="static/" style="position:fixed;left:0;right:0;width:100%;height:100%;border:none;margin:0;padding:0;z-index:999999;"></iframe>

    <script>
        const refresh = () => {
            document.getElementById('iframe').contentWindow.location.reload()
        }

        const resize = () => {
            document.getElementById('iframe').style.height = window.innerHeight - document.getElementById("div").clientHeight + "px"
        } 

        window.addEventListener('resize', resize, true);
        document.getElementById("iframe").addEventListener("load", resize)

    </script>
</body>

</html>